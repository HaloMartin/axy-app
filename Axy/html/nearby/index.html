<!doctype html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<script type="text/javascript" src="../../js/common/flexible.js" ></script>
		<link href="../../css/lib/mui.min.css" rel="stylesheet" />
		<link rel="stylesheet" href="../../css/app/app.css" />
		<style type="text/css">
			.mui-search{
				margin: 0 auto;
				width: 7.12rem;
				pointer-events: none;
			}
			
			/*搜索框图标*/
			.mui-icon-search:before{
				line-height: 45px;			
			}
			
			.mui-search > input{
				border-radius: 15px;
				background-color: #FFFFFF;
			}
			
			
			
			
			.mui-placeholder>span{
				color: #878787;
				font-size: 0.35rem;
			}
		</style>
	</head>

	<body>
		
		
		<header class="mui-bar mui-bar-nav app-header">
			<span class="app-color-white app-font-size-24 mui-pull-left" style="line-height: 45px;">
				深圳
			</span>
			<a class="mui-icon mui-icon-arrowdown app-color-white" style="font-size: .4rem;margin-top: .1rem;"></a>
			
		    <h1 class="mui-title">
		    	<div class="mui-input-row mui-search">
		    	    <input type="search" class="mui-input-clear" placeholder="输入商品名或店铺名">
		    	</div>
		    </h1>
		</header>
		
		<div class="mui-content">
			<!--图片本地下载缓存 示例-->
			<template v-for='o,i in imgs'>
				<img class="img-lazy-load" width="50%" :data-src="o.src"/>	
			</template>
		    
		</div>
		<!--沉浸式动态处理-->
		<script type="text/javascript" src="../../js/common/immersed.js" ></script>
		<script src="../../js/lib/mui.min.js"></script>
		<!--图片缓存处理-->
		<script type="text/javascript" src="../../js/lib/md5.min.js" ></script>
		<script type="text/javascript" src="../../js/common/imagelazyload.js" ></script>
		
		<script type="text/javascript" src="../../js/app/app.js" ></script>
		<script type="text/javascript" src="../../js/lib/vue.min.js" ></script>
		<script type="text/javascript" src="../../js/lib/vue-ni.js" ></script>
		
		<script type="text/javascript" src="../../js/extend/String.js" ></script>
		
		
		<script type="text/javascript">
			
			(function($){
				$.init();
				$.ready(function(){
					$('h1.mui-title')[0].addEventListener('tap', function(){
						alert("跳转到另一页面");
					});
				});
			}(mui));
			
			
			
			new Vue({
				el: '.mui-content',
				data: {
					imgs: [{
						src: "https://sfault-avatar.b0.upaiyun.com/125/535/1255358193-5824870aaf3cb_huge256",
					}],
				},
				mounted: function(){
					imgagelazyload();
					this.test();
				},
				plusReady: function(){ 
					app.device.getInfo_async(function(info){
						console.log(JSON.stringify(info));
					});
					
					// var rs = app.device.getVersion();
					// console.log(app.device.getArguments())
					
					
				},
				methods: {
					test: function(){
						setTimeout(function(){
							// 动态添加一个需要本地缓存判断的img
							this.imgs.push({
								src: "https://sfault-avatar.b0.upaiyun.com/396/329/3963293825-59ed6d668d0ef_huge256",
							});
							imgagelazyload();
							Vue.nextTick(function(){
								// 重新检测
								imgagelazyload();
							});
						}.bind(this), 1e3 * 2);
					}
				}
			});
			
		</script>
	</body>

</html>