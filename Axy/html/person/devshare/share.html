<!doctype html>
<html>

	<head>
		<meta charset="UTF-8">
		<title>共享设备</title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<script type="text/javascript" src="../../../js/common/flexible.js"></script>
		<link href="../../../css/lib/mui.min.css" rel="stylesheet" />
		<link rel="stylesheet" href="../../../css/app/app.css" />

		<style type="text/css">
			html,
			body,
			.mui-content {
				background-color: #FFFFFF;
			}
			
			.mui-bar-nav~.mui-content {
				padding-top: 0;
			}
			
			.bgimg {
				height: 6.16rem;
				background-color: #9F9FA0;
				background-position: center;
				background-size: cover;
				background-repeat: no-repeat;
			}
			
			.menu:before {
				content: '';
				display: block;
				height: 0.266666rem;
				background-color: #F4F8FB;
			}
			
			.tips {
				padding: 0.4rem 0.373333rem;
			}
			
			.menu-icon>div {
				text-align: center;
				float: left;
				width: 25%;
				margin: 0.373333rem 0;
			}
			
			.menu-icon>div>img {
				width: 1rem;
			}
			
			.xian {
				clear: both;
				padding: 0.693333rem 0;
				text-align: center;
				position: relative;
				/*display: inline-block;*/
			}
			
			.xian:before {
				content: '';
				display: block;
				height: 1px;
				background-color: #9f9fa0;
				z-index: 0;
				position: absolute;
				left: 0.633333rem;
				right: 0.633333rem;
				top: 50%;
				transform: scaleY(0.5);
				-webkit-transform: scaleY(0.5);
			}
			
			.xian:after {
				position: relative;
				z-index: 1;
				content: attr(data-content);
				display: inline-block;
				padding: 0 0.4rem;
				background-color: #FFFFFF;
			}
			
			.share-icon {
				text-align: center;
			}
			
			.share-icon>img {
				width: 0.8rem;
				margin: 0 0.7rem;
			}
		</style>

	</head>

	<body>

		<div id="box">
			<header class="mui-bar mui-bar-nav mui-bar-transparent app-header" data-top='0' data-offset='150' data-duration='16'>
				<a class="mui-action-back app-icon-back mui-pull-left"></a>
				<h1 class="mui-title app-color-white" v-text="devInfo.location"></h1>
			</header>

			<div class="mui-content noImmersed">
				<div class="bgimg" :style="{backgroundImage: 'url('+'file:////storage/emulated/0/CameraFamily/Thumbnail/'+devInfo.devid+'.jpeg'+')'}"></div>
				<div class="menu app-font-size-28">
					<div class="tips">
						<span class="app-color-333333">请选择权限：</span>
						<span class="app-color-9f9fa0">（选择权限后，共享的成员可直接使用该摄像头相应功能，请注意隐私保护。）</span>
					</div>
					<div class="menu-icon">
						<div v-for="o,i in menus" @tap="o.selected = !o.selected">
							<img :src='"../../../image/person/devshare/"+ (i+1) + (o.selected?("_"+(i+1)):"") +".png"' />
							<div v-text="o.name"></div>
						</div>
					</div>

					<div class="xian app-color-9f9fa0" data-content="将xxx摄像机分享给"></div>
					<div class="share-icon">
						<img @tap="onShare('qq')" src="../../../image/person/devshare/qq@3x.png" />
						<img @tap="onShare('wxhy')" src="../../../image/person/devshare/wx@3x.png" />
					</div>
				</div>
			</div>
		</div>
		<script type="text/javascript" src="../../../js/common/immersed.js"></script>
		<script src="../../../js/lib/mui.min.js"></script>
		<script type="text/javascript" src="../../../js/lib/vue.min.js"></script>
		<script type="text/javascript" src="../../../js/lib/vue-ni.js"></script>

		<script type="text/javascript">
			mui.init();

			new Vue({
				el: "#box",
				data: function() {
					return {
						devInfo: {
							"location": "",
							"devid": "",

						},

						menus: [{
								name: "视频查看",
								selected: true,
							},
							{
								name: "视频控制",
								selected: false,
							},
							{
								name: "告警提醒",
								selected: true,
							},
							{
								name: "云录像查看",
								selected: false,
							},
							{
								name: "本地录像查看",
								selected: false,
							},
							{
								name: "设备管理",
								selected: false,
							}
						]
					};
				},
				plusReady: function() {
					this.devInfo = this.$view.devInfo;
					// console.log(JSON.stringify(this.devInfo));
				},
				methods: {
					onShare: function(type) {
						new ni.Share(type, function(err, data) {
							if(err) {
								console.log(err)
							}
							console.log(JSON.stringify(data))
						}, {
							img: '_www/img/vhp.png', //图片地址 暂不支持网络地址 
							href: 'https://github.com/NewsNIng/ni', //分享的超链接
							title: '分享标题', //当且仅当href存在时有效
							content: '分享内容' //当且仅当href存在时有效
						});
					}
				}
			})
		</script>
	</body>

</html>